<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="MathWars - Echtzeit-Multiplayer Mathematik-Quiz-Spiel. Fordere echte Gegner in schnellen Mathe-Duellen heraus.">
    <title>MathWars - Math Quiz Game</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<!-- Floating Math Elements Background -->
<div class="floating-math-container" data-index="1"><span class="floating-math">+</span></div>
<div class="floating-math-container" data-index="2"><span class="floating-math">Ã—</span></div>
<div class="floating-math-container" data-index="3"><span class="floating-math">Ã·</span></div>
<div class="floating-math-container" data-index="4"><span class="floating-math">âˆ’</span></div>
<div class="floating-math-container" data-index="5"><span class="floating-math">=</span></div>
<div class="floating-math-container" data-index="6"><span class="floating-math">Ï€</span></div>
<div class="floating-math-container" data-index="7"><span class="floating-math">âˆš</span></div>
<div class="floating-math-container" data-index="8"><span class="floating-math">âˆž</span></div>
<div class="floating-math-container" data-index="9"><span class="floating-math">%</span></div>
<div class="floating-math-container" data-index="10"><span class="floating-math">âˆ«</span></div>
<div class="floating-math-container" data-index="11"><span class="floating-math">âˆ‘</span></div>
<div class="floating-math-container" data-index="12"><span class="floating-math">Â²</span></div>
<div class="floating-math-container" data-index="13"><span class="floating-math">Â³</span></div>
<div class="floating-math-container" data-index="14"><span class="floating-math">Â±</span></div>
<div class="floating-math-container" data-index="15"><span class="floating-math">â‰ </span></div>

<!-- Skip Navigation for Accessibility -->
<a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>

<div class="container" id="main-content">
    <h1 class="game-title">MathWars</h1>

    <!-- Lobby Area (Start Screen) -->
    <div id="lobby-area" role="main" style="display: block;">
        <div class="lobby-hero">
            <!-- Animated Brain Character -->
            <div class="brain-character">
                <div class="brain-body"></div>

                <div class="brain-eyes">
                    <div class="eye"></div>
                    <div class="eye"></div>
                </div>

                <div class="brain-arm left">
                    <div class="brain-hand left">
                        <div class="paper"></div>
                    </div>
                </div>

                <div class="brain-arm right">
                    <div class="brain-hand right">
                        <div class="pen"></div>
                    </div>
                </div>

                <div class="lightbulb">
                    <div class="bulb"></div>
                </div>
            </div>

            <h2 class="lobby-title">MATHWARS</h2>
            <p class="lobby-subtitle">Quick Math Duels Against Real Opponents</p>
        </div>
        <div class="lobby-content">
            <div class="lobby-features">
                <div class="lobby-feature">
                    <div class="lobby-feature-title">Duration</div>
                    <div class="lobby-feature-value">60s</div>
                </div>
                <div class="lobby-feature">
                    <div class="lobby-feature-title">Questions</div>
                    <div class="lobby-feature-value">20</div>
                </div>
                <div class="lobby-feature">
                    <div class="lobby-feature-title">Goal</div>
                    <div class="lobby-feature-value">20</div>
                </div>
            </div>
            <div class="button-container">
                <button id="play-button" class="lobby-play-button" aria-label="Spiel starten">
                    Play
                </button>
                <div class="pointing-hand" aria-hidden="true">ðŸ‘‰</div>
            </div>
        </div>
    </div>

    <!-- Status Text -->
    <div id="status-text" class="status-text" role="status" aria-live="polite" style="display: none;">Connecting to server...</div>

    <!-- Waiting Area -->
    <div id="waiting-area" style="display: none;">
        <p id="waiting-text">Waiting for opponent...</p>

        <!-- Match Found Indicator -->
        <div id="match-found-container" style="display: none;">
            <h2 class="match-found-text">Match Found!</h2>
            <div class="match-players">
                <div class="player-icon">ðŸ‘¤</div>
                <div class="connection-line"></div>
                <div class="player-icon">ðŸ‘¤</div>
            </div>
        </div>

        <div id="countdown-progress-container" style="display: none;">
            <div class="countdown-progress-bar">
                <div id="countdown-progress-fill" class="countdown-progress-fill"></div>
            </div>
            <p id="countdown-tip" class="countdown-tip"></p>
        </div>
        <button id="leave-waiting-button" class="btn-secondary" aria-label="Warteschlange verlassen" style="margin-top: 20px;">
            Leave Queue
        </button>
    </div>

    <!-- Game Area -->
    <div id="game-area" style="display: none;">
        <!-- Left Column: Scores, Timer, Forfeit -->
        <div class="game-left-column">
            <!-- Score Container -->
            <div class="score-container">
                <div class="score-box">
                    <div class="score-label">You</div>
                    <div class="score-value" id="your-score">0</div>
                </div>
                <div class="score-box">
                    <div class="score-label">Opponent</div>
                    <div class="score-value" id="opponent-score">0</div>
                </div>
            </div>

            <!-- Timer -->
            <div class="timer-box">
                <div class="timer-label">Time</div>
                <div class="timer-value" id="timer">60</div>
            </div>

            <!-- Forfeit Button -->
            <button id="forfeit-button" class="btn-danger" aria-label="Spiel aufgeben" style="font-size: 14px; padding: 8px 16px;">
                Forfeit
            </button>
        </div>

        <!-- Right Column: Question, Answer, Numpad -->
        <div class="game-right-column">
            <!-- Question -->
            <div class="question-box">
                <div id="question-number" class="question-number">Question 1/20</div>
                <div id="question-text" class="question-text">Waiting for question...</div>
            </div>

            <!-- Answer Display -->
            <div id="answer-display" class="answer-display">â€”</div>

            <!-- Number Pad -->
            <div class="number-pad" role="group" aria-label="Zahlenblock">
                <button class="number-btn" data-num="7" aria-label="Ziffer 7">7</button>
                <button class="number-btn" data-num="8" aria-label="Ziffer 8">8</button>
                <button class="number-btn" data-num="9" aria-label="Ziffer 9">9</button>

                <button class="number-btn" data-num="4" aria-label="Ziffer 4">4</button>
                <button class="number-btn" data-num="5" aria-label="Ziffer 5">5</button>
                <button class="number-btn" data-num="6" aria-label="Ziffer 6">6</button>

                <button class="number-btn" data-num="1" aria-label="Ziffer 1">1</button>
                <button class="number-btn" data-num="2" aria-label="Ziffer 2">2</button>
                <button class="number-btn" data-num="3" aria-label="Ziffer 3">3</button>

                <button class="number-btn clear-btn" data-num="C" aria-label="Eingabe lÃ¶schen">&lt;</button>
                <button class="number-btn" data-num="0" aria-label="Ziffer 0">0</button>
                <button class="number-btn" data-num="âˆ’" aria-label="Negatives Vorzeichen">âˆ’</button>

                <button class="number-btn submit-btn" data-num="âœ“" aria-label="Antwort absenden">âœ“</button>
            </div>

            <!-- Feedback -->
            <div id="feedback-area" class="feedback" style="display: none;"></div>
        </div>
    </div>

    <!-- Result Area -->
    <div id="result-area" style="display: none;">
        <h2 id="result-message" class="result-message"></h2>

        <div class="score-display">
            <div class="score-item">
                <div class="score-label">Your Score</div>
                <div class="score-value" id="your-final-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Opponent Score</div>
                <div class="score-value" id="opponent-final-score">0</div>
            </div>
        </div>

        <button id="rematch-button" class="btn-primary" onclick="requestRematch()" aria-label="Revanche spielen">
            Rematch
        </button>

        <div id="rematch-status" role="status" aria-live="polite" style="display: none; margin-top: 20px; text-align: center;"></div>

        <button class="btn-secondary" onclick="location.reload()" aria-label="Neues Spiel starten" style="margin-top: 20px;">
            New Game
        </button>
    </div>
</div>

<!-- Legal Footer -->
<footer style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(26, 26, 46, 0.95); padding: 15px; text-align: center; font-size: 12px; color: #999; border-top: 1px solid rgba(0, 255, 136, 0.2); z-index: 1000;">
    <a href="/impressum" style="color: #00ff88; text-decoration: none; margin: 0 15px;">Impressum</a>
    <span style="color: #555;">|</span>
    <a href="/datenschutz" style="color: #00ff88; text-decoration: none; margin: 0 15px;">DatenschutzerklÃ¤rung</a>
    <span style="color: #555;">|</span>
    <span style="margin: 0 15px;">Â© 2025 MathWars</span>
</footer>

<!--
    COOKIE CONSENT BANNER (Currently disabled - no cookies used)

    Uncomment this section when you add Google Analytics or other tracking cookies.
    This banner ensures GDPR compliance by getting explicit consent before setting cookies.

<div id="cookie-consent-banner" style="position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); max-width: 600px; background: #1a1a2e; color: white; padding: 20px; border-radius: 10px; box-shadow: 0 8px 30px rgba(0,0,0,0.3); z-index: 10000; display: none;">
    <p style="margin: 0 0 15px 0; font-size: 14px;">
        Wir verwenden Cookies, um Ihre Erfahrung zu verbessern. Mit der Nutzung unserer Seite stimmen Sie unserer
        <a href="/datenschutz" style="color: #00ff88; text-decoration: underline;">DatenschutzerklÃ¤rung</a> zu.
    </p>
    <div style="display: flex; gap: 10px; justify-content: center;">
        <button id="cookie-accept" style="background: #00ff88; color: #1a1a2e; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer;">
            Akzeptieren
        </button>
        <button id="cookie-decline" style="background: transparent; color: #999; border: 1px solid #555; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
            Ablehnen
        </button>
    </div>
</div>

<script>
    // Cookie Consent Logic
    (function() {
        const consentBanner = document.getElementById('cookie-consent-banner');
        const acceptBtn = document.getElementById('cookie-accept');
        const declineBtn = document.getElementById('cookie-decline');

        // Check if user already made a choice
        const consent = localStorage.getItem('cookieConsent');

        if (!consent) {
            // Show banner after 1 second
            setTimeout(() => {
                consentBanner.style.display = 'block';
            }, 1000);
        } else if (consent === 'accepted') {
            // Load analytics/tracking scripts here
            // Example: loadGoogleAnalytics();
        }

        acceptBtn.addEventListener('click', () => {
            localStorage.setItem('cookieConsent', 'accepted');
            consentBanner.style.display = 'none';
            // Load analytics/tracking scripts here
            // Example: loadGoogleAnalytics();
        });

        declineBtn.addEventListener('click', () => {
            localStorage.setItem('cookieConsent', 'declined');
            consentBanner.style.display = 'none';
        });
    })();
</script>
-->

<script type="module" src="/js/game-modular.js"></script>
</body>
</html>
